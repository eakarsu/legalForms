<!-- Mobile Bottom Navigation for Practice Management -->
<nav class="mobile-bottom-nav mobile-bottom-nav-pm" id="mobileBottomNavPM" role="navigation" aria-label="Mobile practice management navigation">
    <a href="/dashboard" class="nav-item<%= typeof active !== 'undefined' && active === 'dashboard' ? ' active' : '' %>" aria-label="Dashboard">
        <i class="fas fa-tachometer-alt" aria-hidden="true"></i>
        <span>Dashboard</span>
    </a>

    <a href="/clients" class="nav-item<%= typeof active !== 'undefined' && active === 'clients' ? ' active' : '' %>" aria-label="Clients">
        <i class="fas fa-users" aria-hidden="true"></i>
        <span>Clients</span>
    </a>

    <a href="/form/business_formation" class="nav-item nav-action" aria-label="Create new document">
        <div class="nav-action-btn">
            <i class="fas fa-plus" aria-hidden="true"></i>
        </div>
    </a>

    <a href="/cases" class="nav-item<%= typeof active !== 'undefined' && active === 'cases' ? ' active' : '' %>" aria-label="Cases">
        <i class="fas fa-briefcase" aria-hidden="true"></i>
        <span>Cases</span>
    </a>

    <a href="#" class="nav-item" id="mobileMenuTrigger" aria-label="More options">
        <i class="fas fa-bars" aria-hidden="true"></i>
        <span>More</span>
    </a>
</nav>

<!-- Mobile More Menu Sheet -->
<div class="mobile-more-sheet" id="mobileMoreSheet">
    <div class="mobile-more-sheet-backdrop" id="mobileMoreBackdrop"></div>
    <div class="mobile-more-sheet-content">
        <div class="mobile-more-sheet-handle"></div>
        <div class="mobile-more-sheet-header">
            <h5>More Options</h5>
        </div>
        <div class="mobile-more-sheet-body">
            <a href="/calendar" class="mobile-more-item">
                <i class="fas fa-calendar-alt"></i>
                <span>Calendar</span>
            </a>
            <a href="/billing" class="mobile-more-item">
                <i class="fas fa-dollar-sign"></i>
                <span>Billing</span>
            </a>
            <a href="/leads" class="mobile-more-item">
                <i class="fas fa-user-plus"></i>
                <span>Leads</span>
            </a>
            <a href="/conflicts" class="mobile-more-item">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Conflicts</span>
            </a>
            <a href="/trust-accounting" class="mobile-more-item">
                <i class="fas fa-university"></i>
                <span>Trust Accounting</span>
            </a>
            <a href="/ai-drafting" class="mobile-more-item">
                <i class="fas fa-robot"></i>
                <span>AI Drafting</span>
            </a>
            <hr>
            <a href="/account" class="mobile-more-item">
                <i class="fas fa-user-cog"></i>
                <span>Account Settings</span>
            </a>
            <a href="/auth/logout" class="mobile-more-item text-danger">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sign Out</span>
            </a>
        </div>
    </div>
</div>

<style>
.mobile-bottom-nav-pm {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.mobile-bottom-nav-pm .nav-item {
    color: rgba(255, 255, 255, 0.7);
}

.mobile-bottom-nav-pm .nav-item.active {
    color: white;
}

.mobile-bottom-nav-pm .nav-action-btn {
    background: white;
    color: #667eea;
}

/* More Sheet Styles */
.mobile-more-sheet {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1060;
}

.mobile-more-sheet.active {
    display: block;
}

.mobile-more-sheet-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mobile-more-sheet.active .mobile-more-sheet-backdrop {
    opacity: 1;
}

.mobile-more-sheet-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    border-radius: 20px 20px 0 0;
    max-height: 70vh;
    transform: translateY(100%);
    transition: transform 0.3s ease;
    overflow-y: auto;
}

.mobile-more-sheet.active .mobile-more-sheet-content {
    transform: translateY(0);
}

.mobile-more-sheet-handle {
    width: 40px;
    height: 4px;
    background: #dee2e6;
    border-radius: 2px;
    margin: 12px auto;
}

.mobile-more-sheet-header {
    padding: 0 20px 12px;
    border-bottom: 1px solid #f0f0f0;
}

.mobile-more-sheet-header h5 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: #2c3e50;
}

.mobile-more-sheet-body {
    padding: 8px 0 calc(70px + env(safe-area-inset-bottom, 0px));
}

.mobile-more-item {
    display: flex;
    align-items: center;
    padding: 14px 20px;
    color: #2c3e50;
    text-decoration: none;
    transition: background 0.2s;
}

.mobile-more-item:active {
    background: #f8f9fa;
}

.mobile-more-item i {
    width: 24px;
    margin-right: 16px;
    font-size: 1.1rem;
    color: #667eea;
}

.mobile-more-item.text-danger i {
    color: #dc3545;
}

.mobile-more-sheet hr {
    margin: 8px 20px;
    border-color: #f0f0f0;
}

@media (min-width: 992px) {
    .mobile-bottom-nav-pm,
    .mobile-more-sheet {
        display: none !important;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const menuTrigger = document.getElementById('mobileMenuTrigger');
    const moreSheet = document.getElementById('mobileMoreSheet');
    const backdrop = document.getElementById('mobileMoreBackdrop');

    if (menuTrigger && moreSheet) {
        menuTrigger.addEventListener('click', function(e) {
            e.preventDefault();
            moreSheet.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        backdrop.addEventListener('click', function() {
            moreSheet.classList.remove('active');
            document.body.style.overflow = '';
        });

        // Close on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && moreSheet.classList.contains('active')) {
                moreSheet.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
    }
});
</script>
